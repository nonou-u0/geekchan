<main>
  <div class="container px-5 px-sm-0">
    <div class="row">
      <div class="col-md-3">
        <%= render 'shared/profile_and_new_blog', user: @user %>
      </div>

      <div class="col-md-8 offset-md-1">
        <%= render "shared/serach" %>

        <% if @user == current_user %>
          <div class="profile mb-4">
            <h2>„ÅÇ„Åã„ÅÜ„Çì„Å®ÊÉÖÂ†±</h2>
            <table class="table">
              <tr>
                <td><%= image_tag 'Ëù∂„ÄÖ.jpg', size: "100x100" %></td>
                <td>
                  <strong>ÂêçÂâçÔºö</strong><%= @user.name %><br>
                  <strong>„É°„Éº„É´„Ç¢„Éâ„É¨„ÇπÔºö</strong><%= @user.email %>
                </td>
              </tr>
            </table>
          </div>
        <% else %>
          <div class="profile mb-4">
            <h2><%= @user.name %> „Åï„Çì„ÅÆÊäïÁ®øüåº</h2>
          </div>
        <% end %>

        <h2>Âè£„Ç≥„Éü‰∏ÄË¶ß</h2>
        <table class="table">
          <tbody>
            <% @blogs.each do |blog| %>
              <tr>
                <td colspan="2">
                  <%= blog.created_at.strftime("%Y-%m-%d") %>
                  <%= blog.title %>
                  <%= blog.user.name %>
                </td>
              </tr>
              <tr>
                <td><%= image_tag 'Ëù∂„ÄÖ.jpg', size: "100x100" %></td>
                <td colspan="4">
                  <p class="blog-body">
                    <%= truncate(blog.body, length: 45, separator: ' ') %>
                    <% if blog.body.length > 45 %>
                      <%= link_to 'and more', blog_path(blog), class: "btn btn-sm btn-link" %>
                    <% end %>
                  </p>

                  <% if current_user == blog.user %>
                    <div class="mt-2">
                      <%= link_to 'Á∑®ÈõÜ', edit_blog_path(blog), class: "btn btn-sm btn-primary me-2" %>
                      <%= link_to 'ÂâäÈô§', blog_path(blog), method: :delete, data: { confirm: "Êú¨ÂΩì„Å´ÂâäÈô§„Åó„Åæ„Åô„ÅãÔºü" }, class: "btn btn-sm btn-danger" %>
                    </div>
                  <% end %>
                </td>
              </tr>
            <% end %>
          </tbody>
        </table>
        <%= paginate @blogs %>

        <!-- „ÅäÊ∞ó„Å´ÂÖ•„Çä‰∏ÄË¶ßÔºàËá™ÂàÜ„Å†„ÅëË°®Á§∫Ôºâ -->
        <% if @user == current_user %>
          <div class="mt-5">
            <h2>„ÅÑ„ÅÑ„Å≠‰∏ÄË¶ß</h2>
            <% if @favorite_blogs.present? %>
              <table class="table">
                <tbody>
                  <% @favorite_blogs.each do |blog| %>
                    <tr>
                      <td colspan="2">
                        <%= blog.created_at.strftime("%Y-%m-%d") %>
                        <%= blog.title %>
                        <%= blog.user.name %>
                      </td>
                    </tr>
                    <tr>
                      <td><%= image_tag 'Ëù∂„ÄÖ.jpg', size: "100x100" %></td>
                      <td colspan="4">
                        <p class="blog-body">
                          <%= truncate(blog.body, length: 45, separator: ' ') %>
                          <% if blog.body.length > 45 %>
                            <%= link_to 'and more', blog_path(blog), class: "btn btn-sm btn-link" %>
                          <% end %>
                        </p>
                      </td>
                    </tr>
                  <% end %>
                </tbody>
              </table>
            <% else %>
              <p>üåª„ÅäÊ∞ó„Å´ÂÖ•„Çä„ÅÆÊäïÁ®ø„ÅØ„Åæ„Å†„Å™„ÅÑ„Çàüåª</p>
            <% end %>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</main>
